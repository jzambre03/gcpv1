# VSAT Configuration - Detailed Settings
# This file contains all detailed configuration for VSAT automation
# Most settings have sensible defaults - you can remove sections you don't need

version: "1.0"

# Default service configuration (applied to all VSATs unless overridden)
defaults:
  main_branch: main
  environments:
    - prod
    - alpha
    - beta1
    - beta2
  config_paths:
    - "*.yml"
    - "*.yaml"
    - "*.properties"
    - "*.toml"
    - "*.ini"
    - "*.cfg"
    - "*.conf"
    - "*.config"
    - "Dockerfile"
    - "docker-compose.yml"
    - "pom.xml"
    - "build.gradle"
    - "requirements.txt"

# VSAT-specific overrides (optional - remove if not needed)
vsat_overrides: {}
  # Example (uncomment to use):
  # saja9l7:
  #   main_branch: master
  #   environments: [prod, dev]

# Sync behavior configuration
sync:
  # Schedule configuration (supports multiple formats):
  # 
  # Format 1: Comma-separated hours for daily execution (at :00 minutes)
  #   schedule: "2,14"  # Runs at 2:00 AM and 2:00 PM every day
  #   schedule: "3"     # Runs at 3:00 AM every day
  #
  # Format 2: Hour:Minute format for exact time daily
  #   schedule: "3:37"  # Runs at 3:37 AM every day
  #   schedule: "3:37,15:45"  # Runs at 3:37 AM and 3:45 PM every day
  #
  # Format 3: Cron format "minute hour day_of_week" (Sunday=0, Monday=1, etc.)
  #   schedule: "37 3 *"  # Every day at 3:37 AM
  #   schedule: "0 2 0"   # Every Sunday at 2:00 AM
  #   schedule: "30 14 1,3,5"  # Monday, Wednesday, Friday at 2:30 PM
  #   schedule: "0 9 0,6"  # Sunday and Saturday at 9:00 AM
  #
  # Format 4: Cron format with interval "minute hour day_of_week"
  #   schedule: "0 2 */2"  # Every 2 days at 2:00 AM (bi-daily)
  #   schedule: "0 3 1-5"  # Monday to Friday at 3:00 AM (weekdays only)
  #
  schedule: "2,14"  # Twice daily: 2:00 AM and 2:00 PM
  
  # Analysis schedule (optional - defaults to 1 hour after sync)
  # Uses same format as schedule above
  # If not specified, analysis runs 1 hour after each sync
  analysis_schedule: "3,15"  # Twice daily: 3:00 AM and 3:00 PM (1 hour after sync)
  
  # Legacy weekly schedule (deprecated - use 'schedule' instead)
  # weekly_schedule: "0 2 0"  # Every Sunday at 2 AM
  
  # Branch creation
  create_golden_branches: true
  parallel_branch_creation: true
  max_branch_workers: 5
  
  # Analysis execution
  max_analysis_workers: 50  # Number of parallel workers for drift analysis
  avg_analysis_time_minutes: 2  # Average time per analysis (for estimation)
  avg_environments_per_service: 4  # Average number of environments per service (for estimation)
  
  # Logging
  log_all_syncs: true  # Create logs for every sync (not just new VSATs)
  
  # API settings
  api_delay: 0.5  # seconds between API calls
  max_concurrent_requests: 10

# Service filtering rules
filters:
  # Exclude repos matching these patterns
  exclude_patterns:
    - "*-archived"
    - "*-deprecated"
    - "test-*"
    - "*-backup"
  
  # Only include repos with main branch
  require_main_branch: true

# Notification settings
notifications:
  enabled: true
  channels:
    - type: log
      level: info
    - type: database
      table: sync_logs
